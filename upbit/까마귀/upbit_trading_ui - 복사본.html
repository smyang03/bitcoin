<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—…ë¹„íŠ¸ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .status-item {
            background: rgba(255,255,255,0.1);
            padding: 15px 20px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 150px;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .status-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .panel h2 {
            margin-bottom: 20px;
            color: #FFD700;
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
        }

        .form-group input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-primary {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #1e7e34);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(45deg, #dc3545, #c82333);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
            color: #212529;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .chart-container {
            grid-column: span 2;
            height: 400px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .trading-log {
            grid-column: span 2;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.2);
            max-height: 400px;
            overflow-y: auto;
        }

        .log-entry {
            background: rgba(0,0,0,0.2);
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }

        .log-entry.success {
            border-left-color: #28a745;
        }

        .log-entry.warning {
            border-left-color: #ffc107;
        }

        .log-entry.error {
            border-left-color: #dc3545;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #2196F3;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .profit-positive {
            color: #00ff00;
        }

        .profit-negative {
            color: #ff4444;
        }

        .claude-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .claude-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .claude-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00ff00;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .claude-indicator.inactive {
            background: #ff4444;
            animation: none;
        }

        .telegram-config {
            background: #0088cc;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 80%;
            max-width: 600px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .close {
            color: #fff;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #ccc;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .chart-container,
            .trading-log {
                grid-column: span 1;
            }
            
            .status-bar {
                flex-direction: column;
            }
            
            .status-item {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸš€ ì—…ë¹„íŠ¸ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ</h1>
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-value" id="currentBalance">â‚©1,000,000</div>
                    <div class="status-label">í˜„ì¬ ì”ê³ </div>
                </div>
                <div class="status-item">
                    <div class="status-value profit-positive" id="dailyPnL">+0.00%</div>
                    <div class="status-label">ì¼ì¼ ì†ìµ</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="activePositions">0</div>
                    <div class="status-label">í™œì„± í¬ì§€ì…˜</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="tradingStatus">ì¤‘ì§€ë¨</div>
                    <div class="status-label">ê±°ë˜ ìƒíƒœ</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="lastUpdate">--:--</div>
                    <div class="status-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</div>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="main-content">
            <!-- ê¸°ë³¸ ì„¤ì • -->
            <div class="panel">
                <h2>âš™ï¸ ê¸°ë³¸ ì„¤ì •</h2>
                <div class="form-group">
                    <label>ìµœì´ˆ íˆ¬ì ê¸ˆì•¡ (ì›)</label>
                    <input type="number" id="initialAmount" value="1000000" min="10000" step="10000">
                </div>
                <div class="form-group">
                    <label>ì¼ì¼ ìµœëŒ€ ìˆ˜ìµë¥  (%)</label>
                    <input type="number" id="maxProfitRate" value="5" min="1" max="20" step="0.1">
                </div>
                <div class="form-group">
                    <label>ì¼ì¼ ìµœëŒ€ ì†ì‹¤ë¥  (%)</label>
                    <input type="number" id="maxLossRate" value="5" min="1" max="20" step="0.1">
                </div>
                <div class="form-group">
                    <label>ê±°ë˜ ëŒ€ìƒ ì½”ì¸</label>
                    <select id="targetCoins" multiple>
                        <option value="KRW-BTC" selected>ë¹„íŠ¸ì½”ì¸ (BTC)</option>
                        <option value="KRW-ETH" selected>ì´ë”ë¦¬ì›€ (ETH)</option>
                        <option value="KRW-XRP" selected>ë¦¬í”Œ (XRP)</option>
                        <option value="KRW-ADA" selected>ì¹´ë¥´ë‹¤ë…¸ (ADA)</option>
                        <option value="KRW-DOGE">ë„ì§€ì½”ì¸ (DOGE)</option>
                        <option value="KRW-SOL">ì†”ë¼ë‚˜ (SOL)</option>
                    </select>
                </div>
            </div>

            <!-- API í‚¤ ì„¤ì • -->
            <div class="panel">
                <h2>ğŸ”‘ ì—…ë¹„íŠ¸ API ì„¤ì •</h2>
                <div class="form-group">
                    <label>Access Key</label>
                    <input type="password" id="accessKey" placeholder="ì—…ë¹„íŠ¸ Access Key ì…ë ¥">
                </div>
                <div class="form-group">
                    <label>Secret Key</label>
                    <input type="password" id="secretKey" placeholder="ì—…ë¹„íŠ¸ Secret Key ì…ë ¥">
                </div>
                <div class="form-group">
                    <button class="btn btn-primary" onclick="testConnection()">ì—°ê²° í…ŒìŠ¤íŠ¸</button>
                    <button class="btn btn-success" onclick="saveApiKeys()">ì €ì¥</button>
                </div>
                <div id="apiStatus" style="margin-top: 10px;"></div>
            </div>

            <!-- Claude ê°œì… ì„¤ì • -->
            <div class="panel claude-panel">
                <h2>ğŸ¤– Claude AI ê°œì… ì„¤ì •</h2>
                <div class="claude-status">
                    <div class="claude-indicator" id="claudeIndicator"></div>
                    <span>Claude AI í™œì„±</span>
                </div>
                <div class="form-group">
                    <label>ê°œì… ì£¼ê¸°</label>
                    <select id="claudeInterval">
                        <option value="10">10ë¶„ë§ˆë‹¤</option>
                        <option value="30" selected>30ë¶„ë§ˆë‹¤</option>
                        <option value="60">1ì‹œê°„ë§ˆë‹¤</option>
                        <option value="120">2ì‹œê°„ë§ˆë‹¤</option>
                        <option value="240">4ì‹œê°„ë§ˆë‹¤</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="claudeEmergencyMode" checked> 
                        ê¸´ê¸‰ ìƒí™© ìë™ ê°œì…
                    </label>
                </div>
                <div class="form-group">
                    <label>ìœ„í—˜ë„ ì„ê³„ê°’</label>
                    <input type="range" id="riskThreshold" min="0.1" max="1.0" step="0.1" value="0.7">
                    <span id="riskThresholdValue">0.7</span>
                </div>
                <div class="form-group">
                    <button class="btn btn-warning" onclick="claudeManualAnalysis()">ìˆ˜ë™ ë¶„ì„ ìš”ì²­</button>
                    <button class="btn btn-danger" onclick="claudeEmergencyStop()">ê¸´ê¸‰ ì¤‘ì§€</button>
                </div>
            </div>

            <!-- í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì„¤ì • -->
            <div class="panel telegram-config">
                <h2>ğŸ“± í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì„¤ì •</h2>
                <div class="form-group">
                    <label>ë´‡ í† í°</label>
                    <input type="password" id="telegramToken" placeholder="í…”ë ˆê·¸ë¨ ë´‡ í† í° ì…ë ¥">
                </div>
                <div class="form-group">
                    <label>ì±„íŒ… ID</label>
                    <input type="text" id="telegramChatId" placeholder="í…”ë ˆê·¸ë¨ ì±„íŒ… ID ì…ë ¥">
                </div>
                <div class="form-group">
                    <label>ì•Œë¦¼ ì£¼ê¸°</label>
                    <select id="notificationInterval">
                        <option value="5">5ë¶„ë§ˆë‹¤</option>
                        <option value="10">10ë¶„ë§ˆë‹¤</option>
                        <option value="30" selected>30ë¶„ë§ˆë‹¤</option>
                        <option value="60">1ì‹œê°„ë§ˆë‹¤</option>
                        <option value="120">2ì‹œê°„ë§ˆë‹¤</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ì•Œë¦¼ ë‚´ìš©</label>
                    <div>
                        <label><input type="checkbox" id="notifyProfitLoss" checked> ì†ìµ ì •ë³´</label><br>
                        <label><input type="checkbox" id="notifyTrades" checked> ê±°ë˜ ë‚´ì—­</label><br>
                        <label><input type="checkbox" id="notifyAlerts" checked> ê²½ê³  ì•Œë¦¼</label><br>
                        <label><input type="checkbox" id="notifyClaudeActions" checked> Claude ê°œì…</label>
                    </div>
                </div>
                <div class="form-group">
                    <button class="btn btn-primary" onclick="testTelegram()">í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€</button>
                    <button class="btn btn-success" onclick="saveTelegramConfig()">ì €ì¥</button>
                </div>
            </div>
        </div>

        <!-- ìˆ˜ìµë¥  ì°¨íŠ¸ -->
        <div class="chart-container">
            <h2>ğŸ“Š ì‹¤ì‹œê°„ ìˆ˜ìµë¥  ì°¨íŠ¸</h2>
            <canvas id="profitChart"></canvas>
        </div>

        <!-- ê±°ë˜ ì œì–´ -->
        <div class="panel" style="grid-column: span 2;">
            <h2>ğŸ® ê±°ë˜ ì œì–´</h2>
            <div class="controls">
                <button class="btn btn-success" id="startBtn" onclick="startTrading()">ê±°ë˜ ì‹œì‘</button>
                <button class="btn btn-danger" id="stopBtn" onclick="stopTrading()" disabled>ê±°ë˜ ì¤‘ì§€</button>
                <button class="btn btn-warning" onclick="pauseTrading()">ì¼ì‹œ ì •ì§€</button>
                <button class="btn btn-danger" onclick="emergencySell()">ê¸´ê¸‰ ë§¤ë„</button>
                <button class="btn btn-primary" onclick="resetDaily()">ì¼ì¼ ë¦¬ì…‹</button>
            </div>
            <div style="margin-top: 20px;">
                <label>ìˆ˜ìˆ˜ë£Œ í¬í•¨ ìˆ˜ìµë¥  ê³„ì‚°: </label>
                <label class="toggle-switch">
                    <input type="checkbox" id="includeFees" checked>
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <!-- ê±°ë˜ ë¡œê·¸ -->
        <div class="trading-log">
            <h2>ğŸ“ˆ ê±°ë˜ ë¡œê·¸</h2>
            <div id="logContainer">
                <div class="log-entry">
                    <strong>[ì‹œìŠ¤í…œ]</strong> ìë™ë§¤ë§¤ ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>
    </div>

    <!-- ëª¨ë‹¬ ì°½ë“¤ -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('settingsModal')">&times;</span>
            <h2>ê³ ê¸‰ ì„¤ì •</h2>
            <div class="form-group">
                <label>ìµœëŒ€ ë™ì‹œ í¬ì§€ì…˜ ìˆ˜</label>
                <input type="number" id="maxPositions" value="4" min="1" max="10">
            </div>
            <div class="form-group">
                <label>ë‹¨ì¼ í¬ì§€ì…˜ ìµœëŒ€ ë¹„ì¤‘ (%)</label>
                <input type="number" id="maxPositionSize" value="25" min="5" max="50">
            </div>
            <div class="form-group">
                <label>ì†ì ˆë§¤ ë¹„ìœ¨ (%)</label>
                <input type="number" id="stopLossRate" value="1" min="0.5" max="5" step="0.1">
            </div>
            <button class="btn btn-success" onclick="saveAdvancedSettings()">ì €ì¥</button>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let tradingBot = {
            isRunning: false,
            dailyPnL: 0,
            positions: {},
            balance: 1000000,
            initialBalance: 1000000,
            trades: [],
            claudeActive: true,
            lastUpdate: new Date()
        };

        let profitChart;
        let chartData = {
            labels: [],
            datasets: [{
                label: 'ì¼ì¼ ìˆ˜ìµë¥  (%)',
                data: [],
                borderColor: '#00ff00',
                backgroundColor: 'rgba(0, 255, 0, 0.1)',
                tension: 0.4,
                fill: true
            }]
        };

        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initChart() {
            const ctx = document.getElementById('profitChart').getContext('2d');
            profitChart = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#fff'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#fff' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            ticks: { color: '#fff' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
        }

        // API í‚¤ ì €ì¥
        function saveApiKeys() {
            const accessKey = document.getElementById('accessKey').value;
            const secretKey = document.getElementById('secretKey').value;
            
            if (!accessKey || !secretKey) {
                alert('API í‚¤ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì•”í˜¸í™”í•˜ì—¬ ì €ì¥ (ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì €ì¥ ê¶Œì¥)
            localStorage.setItem('upbit_access_key', btoa(accessKey));
            localStorage.setItem('upbit_secret_key', btoa(secretKey));
            
            document.getElementById('apiStatus').innerHTML = 
                '<div style="color: #00ff00;">âœ… API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.</div>';
            
            addLog('API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ì—°ê²° í…ŒìŠ¤íŠ¸
        async function testConnection() {
            const accessKey = document.getElementById('accessKey').value;
            const secretKey = document.getElementById('secretKey').value;
            
            if (!accessKey || !secretKey) {
                alert('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            document.getElementById('apiStatus').innerHTML = 
                '<div style="color: #ffc107;">â³ ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...</div>';

            // ì‹¤ì œë¡œëŠ” ì—…ë¹„íŠ¸ API í˜¸ì¶œ
            setTimeout(() => {
                const isValid = Math.random() > 0.3; // ì‹œë®¬ë ˆì´ì…˜
                
                if (isValid) {
                    document.getElementById('apiStatus').innerHTML = 
                        '<div style="color: #00ff00;">âœ… ì—°ê²° ì„±ê³µ! API í‚¤ê°€ ìœ íš¨í•©ë‹ˆë‹¤.</div>';
                    addLog('ì—…ë¹„íŠ¸ API ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ', 'success');
                } else {
                    document.getElementById('apiStatus').innerHTML = 
                        '<div style="color: #ff4444;">âŒ ì—°ê²° ì‹¤íŒ¨. API í‚¤ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.</div>';
                    addLog('ì—…ë¹„íŠ¸ API ì—°ê²° ì‹¤íŒ¨', 'error');
                }
            }, 2000);
        }

        // í…”ë ˆê·¸ë¨ ì„¤ì • ì €ì¥
        function saveTelegramConfig() {
            const token = document.getElementById('telegramToken').value;
            const chatId = document.getElementById('telegramChatId').value;
            
            if (!token || !chatId) {
                alert('í…”ë ˆê·¸ë¨ ë´‡ í† í°ê³¼ ì±„íŒ… IDë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            localStorage.setItem('telegram_token', btoa(token));
            localStorage.setItem('telegram_chat_id', btoa(chatId));
            
            addLog('í…”ë ˆê·¸ë¨ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            alert('í…”ë ˆê·¸ë¨ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸
        async function testTelegram() {
            const token = document.getElementById('telegramToken').value;
            const chatId = document.getElementById('telegramChatId').value;
            
            if (!token || !chatId) {
                alert('í…”ë ˆê·¸ë¨ ì„¤ì •ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì‹¤ì œë¡œëŠ” í…”ë ˆê·¸ë¨ API í˜¸ì¶œ
            addLog('í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì „ì†¡ ì¤‘...', 'info');
            
            setTimeout(() => {
                const success = Math.random() > 0.2;
                if (success) {
                    addLog('âœ… í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì „ì†¡ ì„±ê³µ', 'success');
                    alert('í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    addLog('âŒ í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨', 'error');
                    alert('ë©”ì‹œì§€ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                }
            }, 1500);
        }

        // ê±°ë˜ ì‹œì‘
        function startTrading() {
            if (tradingBot.isRunning) {
                alert('ê±°ë˜ê°€ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.');
                return;
            }

            // API í‚¤ í™•ì¸
            const accessKey = localStorage.getItem('upbit_access_key');
            if (!accessKey) {
                alert('ë¨¼ì € ì—…ë¹„íŠ¸ API í‚¤ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');
                return;
            }

            tradingBot.isRunning = true;
            tradingBot.initialBalance = parseFloat(document.getElementById('initialAmount').value);
            tradingBot.balance = tradingBot.initialBalance;
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('tradingStatus').textContent = 'ì‹¤í–‰ ì¤‘';
            
            addLog('ğŸš€ ìë™ë§¤ë§¤ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            
            // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì‹œì‘
            startRealTimeUpdate();
            
            // Claude ê°œì… ì‹œì‘
            if (document.getElementById('claudeEmergencyMode').checked) {
                startClaudeMonitoring();
            }
            
            // í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì‹œì‘
            startTelegramNotifications();
        }

        // ê±°ë˜ ì¤‘ì§€
        function stopTrading() {
            tradingBot.isRunning = false;
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('tradingStatus').textContent = 'ì¤‘ì§€ë¨';
            
            addLog('â¹ï¸ ìë™ë§¤ë§¤ê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'warning');
            
            sendTelegramMessage('ğŸ›‘ ìë™ë§¤ë§¤ê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ê¸´ê¸‰ ë§¤ë„
        function emergencySell() {
            if (!confirm('ëª¨ë“  í¬ì§€ì…˜ì„ ê¸´ê¸‰ ë§¤ë„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            addLog('ğŸš¨ ê¸´ê¸‰ ë§¤ë„ ì‹¤í–‰ ì¤‘...', 'error');
            
            // ëª¨ë“  í¬ì§€ì…˜ ì²­ì‚° ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                tradingBot.positions = {};
                updateDisplay();
                addLog('âœ… ëª¨ë“  í¬ì§€ì…˜ì´ ë§¤ë„ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                
                sendTelegramMessage('ğŸš¨ ê¸´ê¸‰ ë§¤ë„ ì™„ë£Œ\nëª¨ë“  í¬ì§€ì…˜ì´ ì²­ì‚°ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }, 2000);
        }

        // ì¼ì¼ ë¦¬ì…‹
        function resetDaily() {
            if (!confirm('ì¼ì¼ ìˆ˜ìµë¥ ì„ ë¦¬ì…‹í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            tradingBot.dailyPnL = 0;
            tradingBot.initialBalance = tradingBot.balance;
            updateDisplay();
            
            addLog('ğŸ”„ ì¼ì¼ ìˆ˜ìµë¥ ì´ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
        }

        // Claude ìˆ˜ë™ ë¶„ì„
        function claudeManualAnalysis() {
            addLog('ğŸ¤– Claude AI ë¶„ì„ ìš”ì²­ ì¤‘...', 'info');
            
            setTimeout(() => {
                const recommendations = [
                    'í˜„ì¬ ì‹œì¥ ìƒí™©ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤. ë³´ìˆ˜ì  ì ‘ê·¼ì„ ê¶Œì¥í•©ë‹ˆë‹¤.',
                    'XRPì—ì„œ ê°•í•œ ë§¤ìˆ˜ ì‹ í˜¸ê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    'BTC ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ì´ 3.2%ë¡œ ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤.',
                    'ì „ì²´ì ì¸ ê±°ë˜ëŸ‰ì´ ì¦ê°€í•˜ê³  ìˆì–´ ë³€ë™ì„± í™•ëŒ€ ì˜ˆìƒë©ë‹ˆë‹¤.'
                ];
                
                const randomRec = recommendations[Math.floor(Math.random() * recommendations.length)];
                addLog(`ğŸ¤– Claude ë¶„ì„: ${randomRec}`, 'info');
                
                sendTelegramMessage(`ğŸ¤– Claude AI ë¶„ì„ ê²°ê³¼:\n${randomRec}`);
            }, 1500);
        }

        // Claude ê¸´ê¸‰ ì¤‘ì§€
        function claudeEmergencyStop() {
            if (!confirm('Claude AIê°€ ê¸´ê¸‰ ì¤‘ì§€ë¥¼ ìš”ì²­í–ˆìŠµë‹ˆë‹¤. ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            stopTrading();
            addLog('ğŸ¤– Claude AIì— ì˜í•œ ê¸´ê¸‰ ì¤‘ì§€ ì‹¤í–‰', 'error');
            sendTelegramMessage('ğŸš¨ Claude AI ê¸´ê¸‰ ì¤‘ì§€\nìœ„í—˜ ìš”ì†Œ ê°ì§€ë¡œ ê±°ë˜ê°€ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
        function startRealTimeUpdate() {
            setInterval(() => {
                if (!tradingBot.isRunning) return;
                
                // ê°€ìƒì˜ ê±°ë˜ ì‹œë®¬ë ˆì´ì…˜
                simulateTrading();
                updateDisplay();
                
                // ìˆ˜ìµë¥  ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                updateChart();
                
                // 5% ì†ìµ ì²´í¬
                checkDailyLimits();
                
                tradingBot.lastUpdate = new Date();
            }, 5000); // 5ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
        }

        // ê°€ìƒ ê±°ë˜ ì‹œë®¬ë ˆì´ì…˜
        function simulateTrading() {
            const includeFees = document.getElementById('includeFees').checked;
            const feeRate = includeFees ? 0.0005 : 0; // 0.05% ìˆ˜ìˆ˜ë£Œ
            
            // ëœë¤ ê±°ë˜ ìƒì„± (ì‹œë®¬ë ˆì´ì…˜)
            if (Math.random() > 0.8) { // 20% í™•ë¥ ë¡œ ê±°ë˜ ë°œìƒ
                const coins = ['BTC', 'ETH', 'XRP', 'ADA', 'DOGE'];
                const coin = coins[Math.floor(Math.random() * coins.length)];
                const action = Math.random() > 0.5 ? 'BUY' : 'SELL';
                const amount = Math.random() * 50000 + 10000; // 1ë§Œ~6ë§Œì›
                const price = Math.random() * 100000 + 50000; // ê°€ìƒ ê°€ê²©
                
                // ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
                const fee = amount * feeRate;
                const netAmount = action === 'BUY' ? amount + fee : amount - fee;
                
                // ìˆ˜ìµë¥  ê³„ì‚° (ì‹œë®¬ë ˆì´ì…˜)
                const priceChange = (Math.random() - 0.5) * 0.1; // -5% ~ +5%
                const profit = netAmount * priceChange;
                
                tradingBot.dailyPnL += profit / tradingBot.initialBalance;
                tradingBot.balance += profit;
                
                // ê±°ë˜ ê¸°ë¡
                const trade = {
                    time: new Date().toLocaleTimeString(),
                    coin: coin,
                    action: action,
                    amount: amount.toLocaleString(),
                    price: price.toLocaleString(),
                    fee: fee.toFixed(0),
                    profit: profit.toFixed(0),
                    profitRate: (profit / netAmount * 100).toFixed(2)
                };
                
                tradingBot.trades.unshift(trade);
                
                const logClass = profit > 0 ? 'success' : 'error';
                const profitSign = profit > 0 ? '+' : '';
                addLog(`ğŸ’° ${action} ${coin}: ${profitSign}${profit.toFixed(0)}ì› (ìˆ˜ìˆ˜ë£Œ: ${fee.toFixed(0)}ì›)`, logClass);
                
                // í¬ì§€ì…˜ ì—…ë°ì´íŠ¸
                if (action === 'BUY') {
                    tradingBot.positions[coin] = (tradingBot.positions[coin] || 0) + 1;
                } else if (tradingBot.positions[coin]) {
                    tradingBot.positions[coin] = Math.max(0, tradingBot.positions[coin] - 1);
                    if (tradingBot.positions[coin] === 0) {
                        delete tradingBot.positions[coin];
                    }
                }
            }
        }

        // ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
        function updateDisplay() {
            // ì”ê³  ì—…ë°ì´íŠ¸
            document.getElementById('currentBalance').textContent = 
                `â‚©${tradingBot.balance.toLocaleString()}`;
            
            // ì¼ì¼ ì†ìµ ì—…ë°ì´íŠ¸
            const dailyPnLPercent = (tradingBot.dailyPnL * 100).toFixed(2);
            const pnlElement = document.getElementById('dailyPnL');
            pnlElement.textContent = `${dailyPnLPercent >= 0 ? '+' : ''}${dailyPnLPercent}%`;
            pnlElement.className = dailyPnLPercent >= 0 ? 'status-value profit-positive' : 'status-value profit-negative';
            
            // í™œì„± í¬ì§€ì…˜ ìˆ˜
            document.getElementById('activePositions').textContent = 
                Object.keys(tradingBot.positions).length;
            
            // ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„
            document.getElementById('lastUpdate').textContent = 
                tradingBot.lastUpdate.toLocaleTimeString();
        }

        // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateChart() {
            const now = new Date();
            const timeLabel = now.toLocaleTimeString();
            const profitPercent = tradingBot.dailyPnL * 100;
            
            chartData.labels.push(timeLabel);
            chartData.datasets[0].data.push(profitPercent);
            
            // ìµœëŒ€ 50ê°œ ë°ì´í„°í¬ì¸íŠ¸ ìœ ì§€
            if (chartData.labels.length > 50) {
                chartData.labels.shift();
                chartData.datasets[0].data.shift();
            }
            
            // ì°¨íŠ¸ ìƒ‰ìƒ ë™ì  ë³€ê²½
            chartData.datasets[0].borderColor = profitPercent >= 0 ? '#00ff00' : '#ff4444';
            chartData.datasets[0].backgroundColor = profitPercent >= 0 ? 'rgba(0, 255, 0, 0.1)' : 'rgba(255, 68, 68, 0.1)';
            
            profitChart.update('none');
        }

        // ì¼ì¼ í•œë„ ì²´í¬
        function checkDailyLimits() {
            const maxProfit = parseFloat(document.getElementById('maxProfitRate').value) / 100;
            const maxLoss = parseFloat(document.getElementById('maxLossRate').value) / 100;
            
            if (tradingBot.dailyPnL >= maxProfit) {
                stopTrading();
                addLog(`ğŸ‰ ì¼ì¼ ìˆ˜ìµ ëª©í‘œ ë‹¬ì„±! (${(tradingBot.dailyPnL * 100).toFixed(2)}%)`, 'success');
                sendTelegramMessage(`ğŸ‰ ì¼ì¼ ìˆ˜ìµ ëª©í‘œ ë‹¬ì„±!\nìˆ˜ìµë¥ : ${(tradingBot.dailyPnL * 100).toFixed(2)}%\nìë™ë§¤ë§¤ê°€ ì¤‘ì§€ë©ë‹ˆë‹¤.`);
            } else if (tradingBot.dailyPnL <= -maxLoss) {
                stopTrading();
                addLog(`ğŸ›‘ ì¼ì¼ ì†ì‹¤ í•œë„ ë„ë‹¬! (${(tradingBot.dailyPnL * 100).toFixed(2)}%)`, 'error');
                sendTelegramMessage(`ğŸ›‘ ì¼ì¼ ì†ì‹¤ í•œë„ ë„ë‹¬!\nì†ì‹¤ë¥ : ${(tradingBot.dailyPnL * 100).toFixed(2)}%\nìë™ë§¤ë§¤ê°€ ì¤‘ì§€ë©ë‹ˆë‹¤.`);
            }
        }

        // Claude ëª¨ë‹ˆí„°ë§ ì‹œì‘
        function startClaudeMonitoring() {
            const interval = parseInt(document.getElementById('claudeInterval').value);
            
            setInterval(() => {
                if (!tradingBot.isRunning) return;
                
                // Claude ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜
                const riskScore = Math.random();
                const riskThreshold = parseFloat(document.getElementById('riskThreshold').value);
                
                if (riskScore > riskThreshold) {
                    const actions = [
                        'í¬ì§€ì…˜ í¬ê¸° ì¶•ì†Œ ê¶Œì¥',
                        'ë³€ë™ì„± ì¦ê°€ë¡œ ì£¼ì˜ í•„ìš”',
                        'ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ í•˜ë½ ê°ì§€',
                        'ê±°ë˜ëŸ‰ ê¸‰ì¦ìœ¼ë¡œ ê´€ë§ ê¶Œì¥'
                    ];
                    
                    const action = actions[Math.floor(Math.random() * actions.length)];
                    addLog(`ğŸ¤– Claude ìë™ ë¶„ì„: ${action}`, 'warning');
                    
                    if (Math.random() > 0.8) { // 20% í™•ë¥ ë¡œ ìë™ ê°œì…
                        addLog('ğŸ¤– Claudeê°€ ìë™ìœ¼ë¡œ ê°œì…í–ˆìŠµë‹ˆë‹¤.', 'error');
                        sendTelegramMessage(`ğŸ¤– Claude ìë™ ê°œì…\nì‚¬ìœ : ${action}`);
                    }
                }
            }, interval * 60 * 1000); // ë¶„ ë‹¨ìœ„ë¥¼ ë°€ë¦¬ì´ˆë¡œ ë³€í™˜
        }

        // í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì‹œì‘
        function startTelegramNotifications() {
            const interval = parseInt(document.getElementById('notificationInterval').value);
            
            setInterval(() => {
                if (!tradingBot.isRunning) return;
                
                const notifyProfitLoss = document.getElementById('notifyProfitLoss').checked;
                
                if (notifyProfitLoss) {
                    const message = generateTelegramReport();
                    sendTelegramMessage(message);
                }
            }, interval * 60 * 1000);
        }

        // í…”ë ˆê·¸ë¨ ë¦¬í¬íŠ¸ ìƒì„±
        function generateTelegramReport() {
            const profitPercent = (tradingBot.dailyPnL * 100).toFixed(2);
            const profitAmount = (tradingBot.balance - tradingBot.initialBalance).toLocaleString();
            const positionCount = Object.keys(tradingBot.positions).length;
            
            const emoji = tradingBot.dailyPnL >= 0 ? 'ğŸ“ˆ' : 'ğŸ“‰';
            const sign = tradingBot.dailyPnL >= 0 ? '+' : '';
            
            return `${emoji} ìë™ë§¤ë§¤ í˜„í™© ë¦¬í¬íŠ¸
            
ğŸ’° í˜„ì¬ ì”ê³ : â‚©${tradingBot.balance.toLocaleString()}
ğŸ“Š ì¼ì¼ ì†ìµ: ${sign}${profitPercent}% (${sign}â‚©${profitAmount})
ğŸ¯ í™œì„± í¬ì§€ì…˜: ${positionCount}ê°œ
â° ì‹œê°„: ${new Date().toLocaleString()}

${tradingBot.dailyPnL >= 0 ? 'âœ… ìˆœì¡°ë¡­ê²Œ ìˆ˜ìµ ì¤‘ì…ë‹ˆë‹¤!' : 'âš ï¸ ì†ì‹¤ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì£¼ì˜í•˜ì„¸ìš”.'}`;
        }

        // í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡
        async function sendTelegramMessage(message) {
            const token = localStorage.getItem('telegram_token');
            const chatId = localStorage.getItem('telegram_chat_id');
            
            if (!token || !chatId) return;
            
            try {
                // ì‹¤ì œë¡œëŠ” í…”ë ˆê·¸ë¨ API í˜¸ì¶œ
                // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
                console.log('í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡:', message);
                addLog('ğŸ“± í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ ì™„ë£Œ', 'info');
            } catch (error) {
                addLog('ğŸ“± í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì „ì†¡ ì‹¤íŒ¨', 'error');
            }
        }

        // ë¡œê·¸ ì¶”ê°€
        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            
            const timestamp = new Date().toLocaleTimeString();
            logEntry.innerHTML = `<strong>[${timestamp}]</strong> ${message}`;
            
            logContainer.insertBefore(logEntry, logContainer.firstChild);
            
            // ìµœëŒ€ 100ê°œ ë¡œê·¸ ìœ ì§€
            while (logContainer.children.length > 100) {
                logContainer.removeChild(logContainer.lastChild);
            }
        }

        // ê³ ê¸‰ ì„¤ì • ì €ì¥
        function saveAdvancedSettings() {
            const settings = {
                maxPositions: document.getElementById('maxPositions').value,
                maxPositionSize: document.getElementById('maxPositionSize').value,
                stopLossRate: document.getElementById('stopLossRate').value
            };
            
            localStorage.setItem('advanced_settings', JSON.stringify(settings));
            addLog('ê³ ê¸‰ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            closeModal('settingsModal');
        }

        // ëª¨ë‹¬ ì°½ ë‹«ê¸°
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ì„¤ì •ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSettings() {
            // API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
            const accessKey = localStorage.getItem('upbit_access_key');
            const secretKey = localStorage.getItem('upbit_secret_key');
            
            if (accessKey) {
                document.getElementById('accessKey').value = atob(accessKey);
            }
            if (secretKey) {
                document.getElementById('secretKey').value = atob(secretKey);
            }
            
            // í…”ë ˆê·¸ë¨ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
            const telegramToken = localStorage.getItem('telegram_token');
            const telegramChatId = localStorage.getItem('telegram_chat_id');
            
            if (telegramToken) {
                document.getElementById('telegramToken').value = atob(telegramToken);
            }
            if (telegramChatId) {
                document.getElementById('telegramChatId').value = atob(telegramChatId);
            }
            
            // ê³ ê¸‰ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
            const advancedSettings = localStorage.getItem('advanced_settings');
            if (advancedSettings) {
                const settings = JSON.parse(advancedSettings);
                document.getElementById('maxPositions').value = settings.maxPositions || 4;
                document.getElementById('maxPositionSize').value = settings.maxPositionSize || 25;
                document.getElementById('stopLossRate').value = settings.stopLossRate || 1;
            }
        }

        // ë¦¬ìŠ¤í¬ ì„ê³„ê°’ ìŠ¬ë¼ì´ë” ì—…ë°ì´íŠ¸
        document.getElementById('riskThreshold').addEventListener('input', function() {
            document.getElementById('riskThresholdValue').textContent = this.value;
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 's':
                        e.preventDefault();
                        if (tradingBot.isRunning) {
                            stopTrading();
                        } else {
                            startTrading();
                        }
                        break;
                    case 'e':
                        e.preventDefault();
                        emergencySell();
                        break;
                    case 'r':
                        e.preventDefault();
                        resetDaily();
                        break;
                }
            }
        });

        // í˜ì´ì§€ ì¢…ë£Œ ì‹œ ê²½ê³ 
        window.addEventListener('beforeunload', function(e) {
            if (tradingBot.isRunning) {
                e.preventDefault();
                e.returnValue = 'ê±°ë˜ê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤. ì •ë§ í˜ì´ì§€ë¥¼ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';
            }
        });

        // ì‹¤ì‹œê°„ í˜„ì¬ê°€ ì—…ë°ì´íŠ¸ (ì‹œë®¬ë ˆì´ì…˜)
        function updateMarketPrices() {
            const coins = document.getElementById('targetCoins');
            for (let option of coins.options) {
                if (option.selected) {
                    const coinName = option.value.split('-')[1];
                    // ì‹¤ì œë¡œëŠ” ì—…ë¹„íŠ¸ APIì—ì„œ í˜„ì¬ê°€ ì¡°íšŒ
                    const price = Math.random() * 100000 + 10000;
                    option.text = `${option.text.split('(')[0]}(${price.toLocaleString()}ì›)`;
                }
            }
        }

        // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§
        function checkNetworkStatus() {
            const status = navigator.onLine ? 'ì—°ê²°ë¨' : 'ì—°ê²° ëŠê¹€';
            const color = navigator.onLine ? '#00ff00' : '#ff4444';
            
            // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í‘œì‹œ (ì‹¤ì œ êµ¬í˜„ ì‹œ)
            if (!navigator.onLine && tradingBot.isRunning) {
                addLog('âš ï¸ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. ê±°ë˜ê°€ ì¼ì‹œ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            initChart();
            loadSettings();
            updateDisplay();
            
            // ì •ê¸° ì—…ë°ì´íŠ¸ ì‹œì‘
            setInterval(updateMarketPrices, 10000); // 10ì´ˆë§ˆë‹¤ ê°€ê²© ì—…ë°ì´íŠ¸
            setInterval(checkNetworkStatus, 5000);  // 5ì´ˆë§ˆë‹¤ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
            
            addLog('ğŸ¯ ì—…ë¹„íŠ¸ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            addLog('ğŸ’¡ Ctrl+S: ê±°ë˜ ì‹œì‘/ì¤‘ì§€, Ctrl+E: ê¸´ê¸‰ ë§¤ë„, Ctrl+R: ì¼ì¼ ë¦¬ì…‹', 'info');
        });

        // ì¶”ê°€ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function exportTradeHistory() {
            const csv = tradingBot.trades.map(trade => 
                `${trade.time},${trade.coin},${trade.action},${trade.amount},${trade.profit}`
            ).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `trade_history_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
        }

        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const settings = JSON.parse(e.target.result);
                        // ì„¤ì • ì ìš© ë¡œì§
                        addLog('ì„¤ì • íŒŒì¼ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.', 'success');
                    } catch (error) {
                        addLog('ì„¤ì • íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨', 'error');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        function exportSettings() {
            const settings = {
                initialAmount: document.getElementById('initialAmount').value,
                maxProfitRate: document.getElementById('maxProfitRate').value,
                maxLossRate: document.getElementById('maxLossRate').value,
                claudeInterval: document.getElementById('claudeInterval').value,
                notificationInterval: document.getElementById('notificationInterval').value
            };
            
            const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'trading_bot_settings.json';
            a.click();
        }

    </script>
</body>
</html>